import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.DtoOFyvK.js";const ee={src:"/_astro/logo.B8HBszRl.png",width:1051,height:237,format:"png"},Me="VideoProgressDB",Ce=1,$="videoProgress",Le=()=>new Promise(((e,t)=>{const r=indexedDB.open(Me,1);r.onerror=e=>t(e.target.error),r.onsuccess=t=>e(t.target.result),r.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains($)||t.createObjectStore($,{keyPath:"id"}).createIndex("lastUpdated","lastUpdated",{unique:!1})}})),De=async()=>{let e;try{e=await Le();const t=e.transaction([$],"readonly").objectStore($);return await new Promise(((e,r)=>{const s=t.getAll();s.onsuccess=()=>e(s.result),s.onerror=e=>r(e.target.error)}))||[]}catch(e){return console.error("Error getting all progress from IndexedDB:",e),[]}finally{e&&e.close()}},Ee=(e,t)=>!t||t<=0?0:Math.min(Math.max(e/t*100,0),100),Pe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 48 48",className:"h-6 w-6 text-white",children:e.jsxs("g",{fill:"none",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"4",children:[e.jsx("path",{d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"}),e.jsx("path",{strokeLinecap:"round",d:"M24.008 12v12.01l8.479 8.48"})]})}),Te=({movies:t,onClose:r})=>e.jsxs("div",{className:"custom-scrollbar absolute -right-2 top-full max-h-[40vh] w-80 overflow-hidden overflow-y-auto rounded-md bg-[#23252b] shadow-2xl backdrop-blur-xl",role:"menu","aria-label":"watched-movies-button",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-white/10 p-3",children:e.jsx("h4",{className:"text-sm font-medium text-white",children:"Lịch sử xem"})}),e.jsx("div",{className:"p-2",children:t.length>0?t.map((t=>{const s=Ee(t.progress,t.duration),a=t.ngonngu||"vi";return e.jsxs("a",{href:`/xem-phim/${t.slug}/tap-${t.sotap}/${a}`,onClick:r,className:"flex cursor-pointer items-center space-x-3 rounded-md px-3 py-3 transition-all duration-200 hover:bg-white/10 focus:bg-white/10 focus:outline-none",role:"option",tabIndex:0,"aria-selected":!1,"aria-label":`Tiếp tục xem phim ${t.ten_phim} tập ${t.sotap}`,children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:t.banner,alt:t.ten_phim||"Ảnh bìa phim",className:"h-14 w-24 rounded-[4px] object-fill","aria-hidden":"true"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-600/70",children:e.jsx("div",{className:"h-full bg-sky-300",style:{width:`${s}%`}})})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"truncate text-[13px] font-medium text-white hover:text-sky-300",children:t.ten_phim}),e.jsxs("p",{className:"truncate text-xs text-white/60",children:["Đang xem tập ",t.sotap]})]})]},t.id)})):e.jsx("div",{className:"p-4 text-center text-white/60",role:"status","aria-live":"polite",children:"Không có phim nào đang xem."})})]}),$e="FavoriteDB",_e=2,k="FavoriteDB",ue=()=>new Promise(((e,t)=>{const r=indexedDB.open($e,2);r.onerror=e=>t(e.target.error),r.onsuccess=t=>e(t.target.result),r.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(k)||t.createObjectStore(k,{keyPath:"slug"})}})),Ie=async()=>{let e;try{e=await ue();const t=e.transaction([k],"readonly").objectStore(k);return await new Promise(((e,r)=>{const s=t.getAll();s.onsuccess=()=>e(s.result),s.onerror=e=>r(e.target.error)}))||[]}catch(e){return console.error("Error fetching favorite movies:",e),[]}finally{e&&e.close()}},Be=async()=>{let e;try{e=await ue();const t=e.transaction([k],"readwrite").objectStore(k).clear();return new Promise(((e,r)=>{t.onsuccess=()=>e(),t.onerror=e=>r(e.target.error)}))}catch(e){throw console.error("Error clearing favorite movies:",e),e}finally{e&&e.close()}},Fe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6 text-white",fill:"none",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})}),Ae=({movies:t,onClose:r,onClear:s})=>e.jsxs("div",{className:"custom-scrollbar absolute right-0 top-full z-[51] max-h-[40vh] w-80 overflow-hidden overflow-y-auto rounded-md bg-[#23252b] shadow-2xl backdrop-blur-xl",role:"menu",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Phim Yêu Thích"}),t.length>0&&e.jsx("button",{onClick:s,className:"text-xs text-red-400 transition-colors hover:text-red-500",children:"Xóa tất cả"})]}),e.jsx("div",{className:"p-2",children:t.length>0?t.map((t=>e.jsxs("a",{href:`/phim/${t.slug}`,onClick:r,className:"flex cursor-pointer items-center space-x-3 rounded-md px-3 py-3 transition-all duration-200 hover:bg-white/10 focus:bg-white/10 focus:outline-none",role:"menuitem",children:[e.jsx("img",{src:t.poster_url,alt:t.ten_phim,className:"h-14 w-10 flex-shrink-0 rounded-[4px] object-fill","aria-hidden":"true"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"truncate text-[13px] font-medium text-white hover:text-sky-300",children:t.ten_phim}),e.jsx("p",{className:"truncate text-xs text-white/60",children:t.ten_khac})]})]},t.slug))):e.jsx("div",{className:"p-4 text-center text-xs text-white/60",role:"status","aria-live":"polite",children:"Chưa có phim yêu thích."})})]}),te="https://api.motchillx.site",he=()=>e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),qe=()=>e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),de=({open:t})=>e.jsx("svg",{className:"h-4 w-4 transform transition-transform duration-300 "+(t?"":"-rotate-90"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),Oe=({open:t})=>e.jsxs("div",{className:"relative h-6 w-6",children:[e.jsx("svg",{className:`absolute left-0 top-0 h-6 w-6 transition-all duration-300 ease-in-out ${t?"scale-75 opacity-0":"scale-100 opacity-100"} `,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h8m-8 6h16"})}),e.jsx("svg",{className:`absolute left-0 top-0 h-6 w-6 transition-all duration-300 ease-in-out ${t?"scale-100 opacity-100":"scale-75 opacity-0"} `,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12",className:"text-red-300"})})]});function Ke(){const[t,s]=r.useState([]),[a,o]=r.useState(!1),[i,n]=r.useState(!1),[l,c]=r.useState(!1),[h,d]=r.useState(!1),[u,m]=r.useState(!1),[x,p]=r.useState(!1),[f,g]=r.useState(""),[w,b]=r.useState(""),[v,j]=r.useState([]),[k,y]=r.useState(!1),[N,C]=r.useState(!1),[L,$]=r.useState(""),[S,E]=r.useState([]),[T,D]=r.useState(!1),[P,R]=r.useState(!1),[M,B]=r.useState(!1),[_,q]=r.useState([]),z=r.useRef(null),[F,I]=r.useState(!1),[U,K]=r.useState([]),A=r.useRef(null),H=r.useRef(null),W=r.useRef(null),O=r.useRef(null),X=r.useRef(null),Q=r.useRef(null),V=r.useRef(null),Y=r.useRef(null),Z=r.useRef(null),G=r.useRef(null),J=r.useCallback((async()=>{try{const e=await fetch(`${te}/api/theloai/`);if(!e.ok)throw new Error("Lỗi khi fetch danh sách thể loại");const t=await e.json();s(t)}catch(e){console.error("Fetch TheLoai List Error:",e),s([])}}),[]),re=r.useCallback((async()=>{try{const e=await De(),t=new Map;e.forEach((e=>{if(e.progress/e.duration*100<90){const r=e.slug;(!t.has(r)||new Date(e.lastUpdated)>new Date(t.get(r).lastUpdated))&&t.set(r,e)}}));const r=Array.from(t.values()).sort(((e,t)=>new Date(t.lastUpdated)-new Date(e.lastUpdated)));q(r)}catch(e){console.error("Error loading watched movies:",e)}}),[]),se=r.useCallback((async()=>{try{const e=await Ie();K(e)}catch(e){console.error("Error loading favorite movies:",e),K([])}}),[]);r.useEffect((()=>{if(typeof window<"u"){const e=()=>c(window.scrollY>50);return window.addEventListener("scroll",e),g(window.location.pathname),re(),se(),J(),()=>window.removeEventListener("scroll",e)}}),[re,se,J]),r.useEffect((()=>{if(typeof document<"u"){const e=e=>{"Escape"===e.key&&ae()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}}),[]),r.useEffect((()=>{if(typeof document<"u"){const e=e=>{H.current&&!H.current.contains(e.target)&&o(!1),W.current&&!W.current.contains(e.target)&&n(!1),O.current&&!O.current.contains(e.target)&&y(!1),z.current&&!z.current.contains(e.target)&&B(!1),A.current&&!A.current.contains(e.target)&&I(!1),h&&X.current&&!X.current.contains(e.target)&&Y.current&&!Y.current.contains(e.target)&&d(!1),Z.current&&!Z.current.contains(e.target)&&m(!1),G.current&&!G.current.contains(e.target)&&p(!1),Q.current&&!Q.current.contains(e.target)&&!e.target.closest(".mobile-search-results-dropdown")&&D(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}}),[h]),r.useEffect((()=>{if(w.trim().length<2)return j([]),void y(!1);C(!0);const e=setTimeout((async()=>{try{const e=await fetch(`${te}/api/search?q=${encodeURIComponent(w)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json(),r=t&&t.data&&t.data.items?t.data.items:t,s=r.length>0;j(r),y(s&&w.trim().length>=2)}catch{j([]),y(!1)}finally{C(!1)}}),200);return()=>{clearTimeout(e),C(!1)}}),[w]),r.useEffect((()=>{if(L.trim().length<2)return E([]),void D(!1);R(!0);const e=setTimeout((async()=>{try{const e=await fetch(`${te}/api/search?q=${encodeURIComponent(L)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json(),r=t&&t.data&&t.data.items?t.data.items:t,s=r.length>0;E(r),D(s&&L.trim().length>=2)}catch(e){console.error("Lỗi khi tìm kiếm trên mobile:",e),E([]),D(!1)}finally{R(!1)}}),200);return()=>{clearTimeout(e),R(!1)}}),[L]);const ae=()=>{o(!1),n(!1),y(!1),D(!1),d(!1),b(""),$(""),B(!1),I(!1),m(!1),p(!1)},oe=(e,t)=>{e.preventDefault(),typeof window<"u"&&(window.location.href=t),ae()},ie=e=>{o("theloai"===e&&!a),n("quocgia"===e&&!i),B("watched"===e&&!M),I("favorite"===e&&!F)},ne=(e,t)=>{("Enter"===e.key||" "===e.key||"ArrowDown"===e.key)&&(e.preventDefault(),ie(t))},le=({results:t,isSearching:r,searchQueryLength:s,onResultClick:a,searchType:o})=>e.jsx("div",{className:"z-[9999] p-2",role:"listbox","aria-label":"Kết quả tìm kiếm",children:r?e.jsx("div",{className:"p-4 text-center text-xs text-white/60",role:"status","aria-live":"polite",children:"Đang tìm kiếm phim"}):t.length>0?e.jsxs(e.Fragment,{children:[t.slice(0,5).map((t=>e.jsxs("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),a(t)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),a(t))},className:"flex cursor-pointer items-center space-x-3 rounded-md px-3 py-3 transition-all duration-200 focus:bg-white/10 focus:outline-none",role:"option",tabIndex:0,"aria-selected":!1,"aria-label":`Phim ${t.ten_phim}, ${t.tinh_trang}, ${t.ngon_ngu}`,children:[e.jsx("img",{src:t.poster_url,alt:"",className:"h-16 w-12 flex-shrink-0 rounded-[4px] object-fill",onError:e=>{e.target.src="/placeholder-image.jpg"},"aria-hidden":"true"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"truncate text-[13px] font-medium text-white hover:text-sky-300",children:t.ten_phim}),e.jsxs("p",{className:"truncate text-xs text-white/60",children:[t.tinh_trang," • ",t.ngon_ngu]})]})]},t.id))),t.length>5&&e.jsxs("a",{href:`/tim-kiem?q=${encodeURIComponent(("desktop"===o?w:L)||"").trim()}`,className:"block border-t border-white/10 px-3 py-2 text-center text-[13px] text-white hover:text-sky-300",onClick:e=>oe(e,`/tim-kiem?q=${encodeURIComponent(("desktop"===o?w:L)||"").trim()}`),"aria-label":`Xem tất cả ${t.length} kết quả tìm kiếm`,children:["Xem tất cả (",t.length," kết quả)"]})]}):e.jsx("div",{className:"p-4 text-center text-white/60",role:"status","aria-live":"polite",children:s<2?"Nhập ít nhất 2 ký tự để tìm kiếm.":"Không tìm thấy kết quả."})});return e.jsxs(e.Fragment,{children:[T&&L.length>=2||h||M||F?e.jsx("div",{onClick:ae,onKeyDown:e=>{"Escape"===e.key&&ae()},className:"fixed inset-0 z-40 lg:hidden",role:"button",tabIndex:0,"aria-label":"Đóng overlay"}):null,e.jsx("header",{ref:Y,className:"z-50 mx-auto max-w-screen-xl px-4 py-0 transition-colors duration-700 ease-in-out lg:px-10 lg:py-2 2xl:px-0",role:"banner",children:e.jsxs("div",{className:"md:h-18 relative flex h-16 w-full items-center justify-between",children:[e.jsxs("div",{className:"flex flex-grow items-center gap-4 sm:gap-16",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2 lg:gap-4",children:[e.jsx("button",{onClick:()=>d((e=>!e)),className:"flex text-white/80 hover:text-white focus:text-white xl:hidden","aria-label":h?"Đóng menu":"Mở menu","aria-expanded":h,"aria-controls":"mobile-menu",children:e.jsx(Oe,{open:h})}),e.jsx("div",{children:e.jsx("a",{href:"/",className:"flex-shrink-0 ","aria-label":"Trang chủ",onClick:e=>oe(e,"/"),children:e.jsx("img",{src:ee.src,alt:"Logo trang web phim",className:" h-8 w-auto lg:h-10  "})})}),e.jsx("nav",{className:"hidden items-center text-xs lg:space-x-2 lg:text-sm xl:flex 2xl:space-x-6",role:"navigation","aria-label":"Menu chính",children:e.jsxs("nav",{className:"ml-8 hidden items-center text-xs lg:space-x-6 lg:text-sm xl:flex 2xl:space-x-6",role:"navigation","aria-label":"Menu chính",children:[[{href:"/loai-phim/phim-chieu-rap",label:"Phim Chiếu Rạp"},{href:"/loai-phim/phim-le",label:"Phim Lẻ"},{href:"/loai-phim/phim-bo",label:"Phim Bộ"},{href:"/loai-phim/hoat-hinh",label:"Hoạt Hình"}].map((t=>e.jsxs("a",{href:t.href,className:`font-mediumm relative py-2 text-[13px] transition-all duration-300 ${t.href,"text-white"} hover:text-sky-300`,onClick:e=>oe(e,t.href),children:[t.label,e.jsx("span",{className:"absolute bottom-0 left-0 h-0.5 w-full transform rounded-full bg-sky-300 transition-transform duration-300 "+(f===t.href?"scale-x-100":"scale-x-0"),"aria-hidden":"true"})]},t.href))),e.jsxs("div",{className:"relative hidden text-[13px] lg:block",ref:H,children:[e.jsxs("button",{onClick:()=>ie("theloai"),onKeyDown:e=>ne(e,"theloai"),className:"flex items-center space-x-2 py-2 font-medium text-white","aria-expanded":a,"aria-haspopup":"true","aria-controls":"theloai-dropdown",id:"theloai-button",children:[e.jsx("span",{children:"Thể Loại"}),e.jsx(de,{open:a})]}),a&&t.length>0&&e.jsx("div",{className:"absolute left-2 top-full z-[51] mt-5 w-[30rem] overflow-hidden rounded-lg bg-[#23252b] shadow-2xl backdrop-blur-xl",role:"menu","aria-labelledby":"theloai-button",id:"theloai-dropdown",children:e.jsx("div",{className:"px-2 py-4",children:e.jsx("div",{className:"grid grid-cols-3 gap-1",children:t.map((t=>e.jsx("a",{href:`/the-loai/${t.slug}`,className:"block px-3 py-2 text-xs text-white hover:text-sky-300",onClick:e=>oe(e,`/the-loai/${t.slug}`),role:"menuitem",children:t.ten},t.id)))})})})]})]})})]}),e.jsx("div",{className:"relative flex-grow lg:hidden",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),L.trim()&&(typeof window<"u"&&(window.location.href=`/tim-kiem?q=${encodeURIComponent(L)}`),D(!1),$(""),d(!1))},className:"relative flex-grow",role:"search",children:[e.jsx("label",{htmlFor:"mobile-search",className:"sr-only",children:"Tìm kiếm phim"}),e.jsx("input",{ref:Q,id:"mobile-search",type:"text",value:L,onChange:e=>$(e.target.value),onFocus:()=>{(L.trim().length>=2||S.length>0)&&D(!0)},placeholder:"Tìm kiếm phim...",className:"h-8 w-full rounded-[4px] bg-white/10 px-4 pr-10 text-xs text-white placeholder-white/60 focus:outline-none",autoComplete:"off","aria-describedby":T?"mobile-search-results":void 0,"aria-expanded":T,"aria-autocomplete":"list",role:"combobox"}),L.length>0?e.jsx("button",{type:"button",onClick:()=>{$(""),D(!1)},className:"absolute right-0 top-0 h-full rounded-[4px] px-3 text-white/70 hover:text-white focus:outline-none","aria-label":"Xóa tìm kiếm",children:e.jsx(qe,{})}):e.jsx("button",{type:"submit",className:"absolute right-2 top-0 h-full rounded-[4px] text-white/70 hover:text-white focus:outline-none","aria-label":"Tìm kiếm",children:e.jsx(he,{})})]})})]}),e.jsxs("div",{className:"flex items-center justify-center px-0 md:gap-3 md:pl-4 lg:gap-6",children:[e.jsxs("div",{ref:O,className:"relative hidden lg:block",children:[e.jsxs("form",{onSubmit:e=>{e.preventDefault(),w.trim()&&(typeof window<"u"&&(window.location.href=`/tim-kiem?q=${encodeURIComponent(w)}`),y(!1))},className:"relative",role:"search",children:[e.jsx("label",{htmlFor:"desktop-search",className:"sr-only",children:"Tìm kiếm phim"}),e.jsx("input",{ref:V,id:"desktop-search",type:"text",value:w,onChange:e=>b(e.target.value),onFocus:()=>{(w.trim().length>=2||v.length>0)&&y(!0)},placeholder:"Tìm kiếm phim...",className:"w-[20rem] rounded-md bg-[#ffffff20] px-3 py-2.5 pr-12 text-sm text-white placeholder-white/60 focus:outline focus:outline-2 focus:outline-offset-[1px] focus:outline-[white]",autoComplete:"off","aria-describedby":k?"search-results":void 0,"aria-expanded":k,"aria-autocomplete":"list",role:"combobox"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 flex h-6 -translate-y-1/2 items-center gap-2 border-l border-white/30 pl-3 text-white/70 transition-colors hover:text-white","aria-label":"Tìm kiếm",children:e.jsx(he,{})})]}),k&&w.length>1&&e.jsx("div",{className:"absolute right-0 top-full z-50 mt-2 max-h-[60vh] w-full overflow-y-auto rounded-md bg-[#1a1c22] shadow-2xl backdrop-blur-xl",id:"search-results",children:e.jsx(le,{results:v,isSearching:N,searchQueryLength:w.length,onResultClick:e=>{b(""),y(!1),typeof window<"u"&&(window.location.href=`/phim/${e.slug}`)},searchType:"desktop"})})]}),e.jsxs("div",{className:"relative hidden md:flex",ref:A,children:[e.jsxs("button",{onClick:()=>{ie("favorite")},onKeyDown:e=>ne(e,"favorite"),className:"e flex flex-col items-center justify-center gap-1 text-white","aria-expanded":F,"aria-haspopup":"true","aria-controls":"favorite-movies-dropdown",id:"favorite-movies-button",children:[e.jsx(Fe,{}),e.jsx("span",{className:"text-xs",children:"Yêu thích"})]}),F&&e.jsx("div",{className:"absolute right-0 top-full z-[51] mt-4",role:"menu","aria-labelledby":"favorite-movies-button",children:e.jsx(Ae,{movies:U,onClose:()=>I(!1),onClear:async()=>{try{await Be(),K([])}catch(e){console.error("Error clearing favorite movies:",e)}}})})]}),e.jsxs("div",{className:"relative hidden md:flex",ref:z,children:[e.jsxs("button",{onClick:()=>ie("watched"),onKeyDown:e=>ne(e,"watched"),className:"flex flex-col items-center justify-center gap-1 text-white","aria-expanded":M,"aria-haspopup":"true","aria-controls":"watched-movies-dropdown",id:"watched-movies-button",children:[e.jsx(Pe,{}),e.jsx("span",{className:"text-xs",children:"Lịch sử xem"})]}),M&&e.jsx("div",{className:"absolute right-0 top-full z-[51] mt-4",role:"menu","aria-labelledby":"watched-movies-button",children:e.jsx(Te,{movies:_,onClose:()=>B(!1)})})]})]})]})}),T&&L.length>1&&e.jsx("div",{className:"mobile-search-results-dropdown absolute left-0 right-0 top-16 z-[51] max-h-[100vh] overflow-y-auto rounded-md bg-[#0F111AF2] shadow-2xl lg:hidden",onClick:e=>e.stopPropagation(),onTouchEnd:e=>e.stopPropagation(),id:"mobile-search-results",children:e.jsx(le,{results:S,isSearching:P,searchQueryLength:L.length,onResultClick:e=>{$(""),D(!1),typeof window<"u"&&(window.location.href=`/phim/${e.slug}`)},searchType:"mobile"})}),h&&e.jsx("div",{ref:X,className:"absolute left-0 right-0 top-16 z-[51] w-full border-t border-white/10 bg-[#2d2d2d] text-sm font-medium shadow-lg lg:m-8 lg:w-[30%] xl:hidden",id:"mobile-menu",role:"navigation","aria-label":"Menu di động",children:e.jsxs("div",{className:"px-2 py-2",children:[e.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{href:"/",label:"Trang Chủ"},{href:"/loai-phim/phim-chieu-rap",label:"Phim Chiếu Rạp"},{href:"/lich-chieu",label:"Lịch Chiếu"},{href:"/loai-phim/hoat-hinh",label:"Phim Hoạt Hình"},{href:"/loai-phim/phim-le",label:"Phim Lẻ"},{href:"/loai-phim/phim-bo",label:"Phim Bộ"}].map((t=>e.jsx("a",{href:t.href,className:"block rounded-md px-3 py-2 text-left text-xs transition-all hover:bg-white/10 hover:text-white focus:bg-none focus:text-white "+(f===t.href?"text-sky-300":"text-white/90"),onClick:e=>oe(e,t.href),children:t.label},t.href)))}),e.jsxs("div",{className:"relative my-2",ref:Z,children:[e.jsxs("button",{onClick:()=>(m(!u),void p(!1)),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs text-left transition-all focus:bg-none hover:text-white  "+(u?"text-sky-300":"text-white/90"),"aria-expanded":u,"aria-haspopup":"true",children:["Thể Loại",e.jsx(de,{open:u})]}),u&&t.length>0&&e.jsx("div",{className:"mt-1 grid grid-cols-3 gap-3 rounded-lg bg-white/5 px-3 py-2 text-white",children:t.map((t=>e.jsx("a",{href:`/the-loai/${t.slug}`,className:"block py-1 text-xs font-normal text-white transition-all hover:text-sky-300",onClick:e=>oe(e,`/the-loai/${t.slug}`),children:t.ten},t.id)))})]})]})})]})}export{Ke as default};