import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.Be8AcK8B.js";import{a as K}from"./alarm.DxcPw94X.js";const O={src:"/_astro/eposide.CaavVmCT.gif"},W=(r,d,g)=>{let x="";{const u=new Date;u.setTime(u.getTime()+g*24*60*60*1e3),x="; expires="+u.toUTCString()}document.cookie=r+"="+d+x+"; path=/; SameSite=Lax"},Y=({isAscending:r})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 transition-transform duration-200 ${r?"rotate-0":"rotate-180"}`,width:"256",height:"256",viewBox:"0 0 256 256",children:e.jsxs("g",{fill:"currentColor",children:[e.jsx("path",{d:"M224 80v88l-24 24H48V64h160a16 16 0 0 1 16 16",opacity:"0.2"}),e.jsx("path",{d:"M128 128a8 8 0 0 1-8 8H48a8 8 0 0 1 0-16h72a8 8 0 0 1 8 8M48 72h136a8 8 0 0 0 0-16H48a8 8 0 0 0 0 16m56 112H48a8 8 0 0 0 0 16h56a8 8 0 0 0 0-16m125.66-21.66a8 8 0 0 0-11.32 0L192 188.69V112a8 8 0 0 0-16 0v76.69l-26.34-26.35a8 8 0 0 0-11.32 11.32l40 40a8 8 0 0 0 11.32 0l40-40a8 8 0 0 0 0-11.32"})]})}),se=({vietsub:r=[],thuyetminh:d=[],longtieng:g=[],movieTitle:x="",slug:u,currentEpisodeSlug:L="",currentType:k="",thongbao:M,initialSortAscending:R=!0})=>{const V=r.length>0,A=d.length>0,$=g.length>0,o=40,[h,F]=n.useState(R),m=h,p=h,f=h,[y,B]=n.useState(o),[w,Q]=n.useState(o),[j,E]=n.useState(o),[i,G]=n.useState(""),[a,z]=n.useState(""),[l,I]=n.useState(""),P=()=>{F(t=>{const s=!t;return W("sortEpisode",s?"1":"0",365),s})};if(!V&&!A&&!$)return e.jsx("div",{className:"z-20 p-2 text-center text-sm font-medium text-gray-400",children:"Phim này hiện đang cập nhật. Vui lòng quay lại sau!"});const v=n.useMemo(()=>{let t=r.filter(s=>(s.tap_phim?.so_tap||s.so_tap||"").toString().toLowerCase().includes(i.toLowerCase()));return m?t:t.slice().reverse()},[r,i,m]),S=n.useMemo(()=>{let t=d.filter(s=>(s.tap_phim?.so_tap||s.so_tap||"").toString().toLowerCase().includes(a.toLowerCase()));return p?t:t.slice().reverse()},[d,a,p]),b=n.useMemo(()=>{let t=g.filter(s=>(s.tap_phim?.so_tap||s.so_tap||"").toString().toLowerCase().includes(l.toLowerCase()));return f?t:t.slice().reverse()},[g,l,f]),q=t=>{switch(t){case"vietsub":return"Vietsub";case"thuyetminh":return"Thuyết Minh";case"longtieng":return"Lồng Tiếng";default:return""}},N=(t,s)=>{const c=t.tap_phim?.slug||"1",H=(t.tap_phim?.so_tap||t.so_tap||"1").toString(),X=`/xem-phim/${u}/${c}/${s}`,D=L&&k&&c===L&&s===k,J=`
     relative flex items-center justify-center rounded-[4px] p-2.5 text-center text-[13px] lg:text-sm font-medium transition-colors duration-200
     ${D?"bg-[#252525] shadow-lg text-sky-300":"bg-[#252525] text-gray-200 hover:text-sky-300"}
  `;return e.jsx("a",{href:X,className:J,title:`Tập ${H} - ${x} (${q(s)})`,children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[D&&e.jsx("img",{src:O.src,alt:"Playing",className:"absolute bottom-0 left-1 h-4 w-4",style:{filter:"invert(38%) sepia(96%) saturate(2073%) hue-rotate(179deg) brightness(94%) contrast(102%)"}}),e.jsx("span",{children:`${H}`})]})},t.id)},C=(t,s,c)=>s-t<=0?null:e.jsx("button",{onClick:()=>c(s),className:"rounded-[4px] bg-[#252525] p-2.5 text-center text-[13px] font-medium text-gray-200 transition-colors hover:text-sky-300 lg:text-sm",children:"Xem thêm"}),T=(t,s,c)=>t<=s?null:e.jsx("button",{onClick:()=>c(s),className:"rounded-[4px] bg-[#252525] p-2.5 text-center text-[13px] font-medium text-gray-200 transition-colors hover:text-sky-300 lg:text-sm",children:"Rút gọn"}),_=t=>e.jsx("button",{onClick:P,className:"rounded bg-[#353535] p-1 text-white transition-colors duration-200 hover:text-sky-300",title:t?"Sắp xếp Giảm dần (Mới nhất)":"Sắp xếp Tăng dần (Cũ nhất)",children:e.jsx(Y,{isAscending:t})});return e.jsxs("div",{className:"z-20 space-y-4",children:[M&&e.jsxs("div",{className:"!my-8 flex w-full flex-row items-center gap-4 rounded-lg bg-gradient-to-r from-[#4158D0] to-[#C850C0] p-2 text-sm text-white",children:[e.jsx("div",{className:"flex-shrink-0 rounded-full bg-[#0005]",children:e.jsx("img",{src:K.src,alt:"Thông Báo",className:"h-8 w-8"})}),e.jsx("span",{className:"text-base",dangerouslySetInnerHTML:{__html:M.noidung}})]}),e.jsxs("div",{className:" flex flex-col gap-8",children:[V&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[" ",e.jsx("h2",{className:"font-seogoe text-lg font-medium text-white lg:text-xl",children:"Vietsub"}),_(m)]}),e.jsx("input",{type:"text",placeholder:"Tìm tập...",value:i,onChange:t=>G(t.target.value),className:"w-28 rounded-[4px] border border-gray-600 bg-[#252525] p-1 px-2 text-xs text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-sky-300"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-6 lg:gap-4 xl:grid-cols-7",children:[v.slice(0,i?v.length:y).map(t=>N(t,"vietsub")),i===""&&C(y,v.length,B),i===""&&T(y,o,B)]})]}),A&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[" ",e.jsx("h2",{className:"font-seogoe text-lg font-medium text-white lg:text-xl",children:"Thuyết Minh"}),_(p)]}),e.jsx("input",{type:"text",placeholder:"Tìm tập...",value:a,onChange:t=>z(t.target.value),className:"w-28 rounded-[4px] border border-gray-600 bg-[#252525] p-1 px-2 text-xs text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-sky-300"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-6 lg:gap-4 xl:grid-cols-7",children:[S.slice(0,a?S.length:w).map(t=>N(t,"thuyetminh")),a===""&&C(w,S.length,Q),a===""&&T(w,o,Q)]})]}),$&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[" ",e.jsx("h2",{className:"font-seogoe text-lg font-medium text-white lg:text-xl",children:"Lồng Tiếng"}),_(f)]}),e.jsx("input",{type:"text",placeholder:"Tìm tập...",value:l,onChange:t=>I(t.target.value),className:"w-28 rounded-[4px] border border-gray-600 bg-[#252525] p-1 px-2 text-xs text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-sky-300"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-6 lg:gap-4 xl:grid-cols-7",children:[b.slice(0,l?b.length:j).map(t=>N(t,"longtieng")),l===""&&C(j,b.length,E),l===""&&T(j,o,E)]})]})]})]})};export{se as default};
