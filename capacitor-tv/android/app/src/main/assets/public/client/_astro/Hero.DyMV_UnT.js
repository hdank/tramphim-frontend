import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.Be8AcK8B.js";import{c as W}from"./movieUtils.BPictt7M.js";import{M as B,i as H,u as z,P as T,a as U,b as D,L as K,m as C}from"./proxy.jt7NOk77.js";function I(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function V(...e){return t=>{let s=!1;const i=e.map((e=>{const i=I(e,t);return!s&&"function"==typeof i&&(s=!0),i}));if(s)return()=>{for(let t=0;t<i.length;t++){const s=i[t];"function"==typeof s?s():I(e[t],null)}}}}function X(...e){return i.useCallback(V(...e),e)}class F extends i.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,s=H(e)&&e.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function G({children:t,isPresent:s,anchorX:n,root:r}){const a=i.useId(),o=i.useRef(null),l=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=i.useContext(B),d=X(o,t?.ref);return i.useInsertionEffect((()=>{const{width:e,height:t,top:i,left:d,right:h}=l.current;if(s||!o.current||!e||!t)return;const m="left"===n?`left: ${d}`:`right: ${h}`;o.current.dataset.motionPopId=a;const u=document.createElement("style");c&&(u.nonce=c);const f=r??document.head;return f.appendChild(u),u.sheet&&u.sheet.insertRule(`\n          [data-motion-pop-id="${a}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${m}px !important;\n            top: ${i}px !important;\n          }\n        `),()=>{f.contains(u)&&f.removeChild(u)}}),[s]),e.jsx(F,{isPresent:s,childRef:o,sizeRef:l,children:i.cloneElement(t,{ref:d})})}const O=({children:t,initial:s,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:o,mode:l,anchorX:c,root:d})=>{const h=z(q),m=i.useId();let u=!0,f=i.useMemo((()=>(u=!1,{id:m,initial:s,isPresent:n,custom:a,onExitComplete:e=>{h.set(e,!0);for(const e of h.values())if(!e)return;r&&r()},register:e=>(h.set(e,!1),()=>h.delete(e))})),[n,h,r]);return o&&u&&(f={...f}),i.useMemo((()=>{h.forEach(((e,t)=>h.set(t,!1)))}),[n]),i.useEffect((()=>{!n&&!h.size&&r&&r()}),[n]),"popLayout"===l&&(t=e.jsx(G,{isPresent:n,anchorX:c,root:d,children:t})),e.jsx(T.Provider,{value:f,children:t})};function q(){return new Map}const R=e=>e.key||"";function L(e){const t=[];return i.Children.forEach(e,(e=>{i.isValidElement(e)&&t.push(e)})),t}const $=({children:t,custom:s,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:d})=>{const[h,m]=U(l),u=i.useMemo((()=>L(t)),[t]),f=l&&!h?[]:u.map(R),p=i.useRef(!0),x=i.useRef(u),j=z((()=>new Map)),[g,v]=i.useState(u),[N,k]=i.useState(u);D((()=>{p.current=!1,x.current=u;for(let e=0;e<N.length;e++){const t=R(N[e]);f.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}}),[N,f.length,f.join("-")]);const b=[];if(u!==g){let e=[...u];for(let t=0;t<N.length;t++){const s=N[t],i=R(s);f.includes(i)||(e.splice(t,0,s),b.push(s))}return"wait"===o&&b.length&&(e=b),k(L(e)),v(u),null}const{forceRender:y}=i.useContext(K);return e.jsx(e.Fragment,{children:N.map((t=>{const i=R(t),g=!(l&&!h)&&(u===N||f.includes(i));return e.jsx(O,{isPresent:g,initial:!(p.current&&!n)&&void 0,custom:s,presenceAffectsLayout:a,mode:o,root:d,onExitComplete:g?void 0:()=>{if(!j.has(i))return;j.set(i,!0);let e=!0;j.forEach((t=>{t||(e=!1)})),e&&(y?.(),k(x.current),l&&m?.(),r&&r())},anchorX:c,children:t},i)}))})},J=()=>e.jsxs("div",{className:"hero-featured-container",children:[e.jsx("div",{className:"hero-featured-bg",children:e.jsx("div",{className:"skeleton-shimmer absolute inset-0"})}),e.jsxs("div",{className:"hero-featured-content",children:[e.jsxs("div",{className:"hero-featured-left",children:[e.jsx("div",{className:"skeleton-shimmer mb-4 h-12 w-3/4 rounded-lg lg:h-16"}),e.jsx("div",{className:"skeleton-shimmer mb-2 h-4 w-1/2 rounded"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("div",{className:"skeleton-shimmer h-6 w-16 rounded-full"}),e.jsx("div",{className:"skeleton-shimmer h-6 w-16 rounded-full"}),e.jsx("div",{className:"skeleton-shimmer h-6 w-16 rounded-full"})]}),e.jsx("div",{className:"skeleton-shimmer mb-4 h-16 w-full rounded"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"skeleton-shimmer h-12 w-12 rounded-full"}),e.jsx("div",{className:"skeleton-shimmer h-12 w-12 rounded-full"})]})]}),e.jsx("div",{className:"hero-featured-right",children:e.jsx("div",{className:"flex gap-2",children:Array.from({length:6}).map(((t,s)=>e.jsx("div",{className:"skeleton-shimmer h-16 w-12 rounded-lg"},s)))})})]})]}),k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},Q={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};function ne({movies:t=[],loading:s}){const[n,r]=i.useState(0),a=t.slice(0,8),o=a[n];if(i.useEffect((()=>{if(0===a.length)return;const e=setInterval((()=>{r((e=>(e+1)%a.length))}),8e3);return()=>clearInterval(e)}),[a.length]),s||!a||0===a.length)return e.jsx(J,{});const{id:l,slug:c,ten_phim:d,banner_url:h,poster_url:m,title_image_url:u,tinh_trang:f,ten_khac:p,mo_ta:x}=o,j=`/phim/${c}`;return e.jsxs("section",{className:"hero-featured-section",children:[e.jsx($,{mode:"wait",children:e.jsxs(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"hero-featured-bg",children:[e.jsx("img",{src:h||m,alt:d,className:"hero-featured-bg-img",fetchPriority:"high",loading:"eager",decoding:"async"}),e.jsx("div",{className:"hero-featured-gradient"}),e.jsx("div",{className:"hero-featured-gradient-left"})]},n)}),e.jsxs("div",{className:"hero-featured-content",children:[e.jsx($,{mode:"wait",children:e.jsxs(C.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:Q,className:"hero-featured-left",children:[u&&e.jsx(C.div,{variants:k,className:"hero-title-image-wrapper",children:e.jsx("img",{src:u,alt:d,className:"hero-title-image"})}),!u&&e.jsx(C.h1,{variants:k,className:"hero-featured-title",children:d}),e.jsx(C.p,{variants:k,className:"hero-featured-alt-name",children:W(p)}),f&&e.jsx(C.div,{variants:k,className:"hero-featured-meta",children:e.jsx("span",{className:"hero-meta-badge",children:f})}),e.jsx(C.p,{variants:k,className:"hero-featured-desc hidden md:block",children:x?x.length>200?x.substring(0,200)+"...":x:""}),e.jsxs(C.div,{variants:k,className:"hero-featured-actions",children:[e.jsx("a",{href:j,className:"hero-play-btn",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})}),e.jsx("a",{href:j,className:"hero-info-btn",title:"Xem chi tiáº¿t",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]},n)}),e.jsx("div",{className:"hero-featured-right",children:e.jsx("div",{className:"hero-thumbnails-container",children:a.map(((t,s)=>e.jsxs("button",{onClick:()=>r(s),className:"hero-thumbnail "+(s===n?"hero-thumbnail-active":""),children:[e.jsx("img",{src:t.poster_url,alt:t.ten_phim,className:"hero-thumbnail-img"}),s===n&&e.jsx("div",{className:"hero-thumbnail-border"})]},t.id||t.slug)))})})]})]})}export{ne as default};